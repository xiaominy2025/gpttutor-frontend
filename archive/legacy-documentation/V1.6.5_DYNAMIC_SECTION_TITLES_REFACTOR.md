# V1.6.5 Dynamic Section Titles Refactor

## Overview
Refactored the frontend to dynamically import answer section titles from metadata.json using `sections_titles`, instead of using hardcoded values. This enables full multi-course flexibility where each course can define its own section headers.

## Changes Made

### 1. App.jsx Updates

**Added section titles extraction:**
```javascript
// Extract section titles from metadata
const sectionTitles = metadata?.sections_titles || [];
```

**Updated AnswerCard rendering:**
```javascript
// Before:
<AnswerCard 
  strategicThinkingLens={answer.strategicThinkingLens}
  storyInAction={answer.storyInAction}
  followUpPrompts={answer.followUpPrompts || []}
  conceptsToolsPractice={answer.conceptsToolsPractice || []}
  key={JSON.stringify(answer)}
  onReflectionPromptClick={handleReflectionPromptClick}
/>

// After:
<AnswerCard 
  answer={answer}
  sectionTitles={sectionTitles}
  key={JSON.stringify(answer)}
  onReflectionPromptClick={handleReflectionPromptClick}
/>
```

**Updated SkeletonSection rendering:**
```javascript
// Before:
{(metadata.sections_titles || []).map((title, index) => (
  <SkeletonSection key={index} title={title} />
))}

// After:
{sectionTitles.map((title, index) => (
  <SkeletonSection key={index} title={title} />
))}
```

### 2. AnswerCard.jsx Updates

**Updated function signature:**
```javascript
// Before:
export default function AnswerCard({
  strategicThinkingLens = "No strategic thinking lens available",
  storyInAction = "No story available",
  followUpPrompts = [],
  conceptsToolsPractice = [],
  onReflectionPromptClick,
}) {

// After:
export default function AnswerCard({ 
  answer, 
  sectionTitles = [], 
  onReflectionPromptClick 
}) {
```

**Added dynamic title handling:**
```javascript
// Fallback to default titles if sectionTitles is not provided or empty
const defaultTitles = ["Strategic Thinking Lens", "Story in Action", "Follow-up Prompts", "Concepts/Tools"];
const titles = sectionTitles.length === 4 ? sectionTitles : defaultTitles;

// Extract answer properties with fallbacks
const {
  strategicThinkingLens = "No strategic thinking lens available",
  storyInAction = "No story available", 
  followUpPrompts = [],
  conceptsToolsPractice = []
} = answer || {};
```

**Updated section rendering with dynamic titles:**
```javascript
// Strategic Thinking Lens
<h3>{titles[0]}</h3>

// Story in Action (conditional based on titles length)
{titles.length >= 4 && (
  <div className="answer-section" data-testid="story-in-action">
    <h3>{titles[1]}</h3>
    // ... content
  </div>
)}

// Follow-up Prompts
<h3>{titles.length >= 4 ? titles[2] : titles[1]}</h3>

// Concepts & Tools
<h3>{titles.length >= 4 ? titles[3] : titles[2]}</h3>
```

## Metadata Structure Support

The refactor supports the following metadata.json structure:
```json
{
  "title": "Decision-Making Practice Lab",
  "mobile_title": "Decision Lab",
  "sections_titles": [
    "Strategic Thinking Lens",
    "Follow-up Prompts", 
    "Concepts/Tools"
  ],
  "default_sections": 3,
  "total_cap": 4
}
```

## Key Features

1. **Dynamic Section Titles**: Section headers are now pulled from `metadata.sections_titles`
2. **Flexible Section Count**: Supports both 3-section and 4-section configurations
3. **Fallback Support**: Uses default titles if metadata is not available
4. **Conditional Rendering**: "Story in Action" section only renders when 4 titles are provided
5. **Backward Compatibility**: Maintains existing functionality for courses without metadata

## Benefits

- **Multi-course Support**: Each course can define its own section structure
- **Consistent UI**: Loading skeletons and answer cards use the same dynamic titles
- **Maintainable**: No hardcoded section titles in the frontend code
- **Extensible**: Easy to add new courses with different section configurations

## Testing

The refactor maintains all existing functionality while adding support for:
- 3-section courses (like Decision Lab)
- 4-section courses (traditional format)
- Fallback to default titles when metadata is unavailable
- Proper loading states with dynamic skeleton sections 